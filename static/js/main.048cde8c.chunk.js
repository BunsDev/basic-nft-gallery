(this["webpackJsonpnft-gallery"]=this["webpackJsonpnft-gallery"]||[]).push([[0],{223:function(e,t){},332:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(63),o=n.n(a),i=n(377),s=n(382),l=n(189),u=Object(l.a)(),j=n(376),d=n(391),b=n(392),h=n(113),x=n(389),f=n(390),O=n(379),v=n(21),g=n(92),p=n(6),m=n.n(p),k=n(102);var w=n(3),C=c.a.createContext(null);function y(){return Object(r.useContext)(C)}function S(e){var t=e.children,n=Object(g.b)().error,c=Object(r.useState)(void 0),a=Object(v.a)(c,2),o=a[0],i=a[1],s=Object(r.useState)(void 0),l=Object(v.a)(s,2),u=l[0],j=l[1],d=Object(r.useState)(!1),b=Object(v.a)(d,2),h=b[0],x=b[1],f=Object(r.useState)(),O=Object(v.a)(f,2),p=O[0],y=O[1],S=Object(r.useCallback)((function(){return j(void 0),i(o?void 0:"0x4c4a5490deefefa16f49a1a48c9acdc60f4117d0")}),[o]),I=Object(r.useCallback)((function(e){return x(!0),y(void 0),(t=e,fetch("https://api.covalenthq.com/v1/1/address/".concat(t,"/balances_v2/?quote-currency=USD&format=JSON&nft=true&no-nft-fetch=true&key=ckey_docs")).then(function(){var e=Object(k.a)(m.a.mark((function e(t){var n,r,c,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,t.json();case 4:n=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),console.error(e.t0),new Error("Something went wrong");case 11:if(n){e.next=13;break}throw new Error("Something went wrong");case 13:if(!n.error){e.next=17;break}throw c=(r=n).error_message,a=r.error_code,console.error(c),new Error("Error with code #".concat(a,": ").concat(c));case 17:return o=n.data.items,e.abrupt("return",o.filter((function(e){var t=e.nft_data,n=e.supports_erc;return t&&n&&n.includes("erc721")})).flatMap((function(e){var t=e.contract_address;return e.nft_data.map((function(e){var n=e.token_id,r=e.owner;return{contractAddress:t,tokenId:n,owner:r}}))})));case 19:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}())).then((function(e){j(e),x(!1)})).catch((function(e){return y(e)}));var t}),[]);return Object(r.useEffect)((function(){!p&&n&&y(n)}),[n,y,p]),Object(w.jsx)(C.Provider,{value:{toggleExampleAccount:S,getTokens:I,exampleAccount:o,error:p,setError:y,loading:h,tokens:u,setLoading:x},children:t})}var I=n(385),T=n(375),A=n(387),E=n(388),F=n(71),R=n(191),_=n(134),D=new(n(192).a)({supportedChainIds:[1]});function U(){var e=Object(g.b)(),t=e.activate,n=Object(R.a)(e,["activate"]),c=Object(r.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(void 0,[D].concat(n))}),[t]);return Object(F.a)({activate:c},n)}function L(e){return new _.a.providers.Web3Provider(e)}function G(e){var t=e.children;return Object(w.jsx)(g.a,{getLibrary:L,children:t})}var N=n(24);function P(e){try{return Object(N.a)(e)}catch(t){return!1}}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=P(e);if(!n)throw Error("Invalid 'address' parameter '".concat(e,"'."));return"".concat(n.substring(0,t+2),"...").concat(n.substring(42-t))}function W(){var e=U(),t=e.account,n=e.activate,c=e.deactivate,a=Object(r.useState)(!1),o=Object(v.a)(a,2),i=o[0],s=o[1],l=function(){s(!1)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){if(!t)return n();s(!0)},children:t?q(t):"Connect wallet"}),Object(w.jsxs)(I.a,{open:i,onClose:l,children:[Object(w.jsx)(T.a,{children:"Disconnect wallet"}),Object(w.jsx)(A.a,{children:"Are you sure you want to disconnect your wallet?"}),Object(w.jsxs)(E.a,{children:[Object(w.jsx)(O.a,{onClick:l,children:"Cancel"}),Object(w.jsx)(O.a,{onClick:function(){c(),l()},variant:"contained",color:"error",children:"Disconnect"})]})]})]})}function B(){var e=y(),t=e.exampleAccount,n=e.toggleExampleAccount;return Object(w.jsx)(x.a,{position:"fixed",sx:{backgroundColor:"transparent",boxShadow:"none"},children:Object(w.jsxs)(f.a,{sx:{alignItems:"center",justifyContent:"space-between"},children:[Object(w.jsx)(O.a,{variant:"contained",color:t?"error":"secondary",onClick:function(){return n()},children:t?"Show my wallet":"Show example"}),Object(w.jsx)(W,{})]})})}var J=Object(h.a)("div")((function(e){return e.theme.mixins.toolbar}));function M(e){var t=e.children;return Object(w.jsxs)(j.a,{sx:{height:"100vh"},children:[Object(w.jsx)(B,{}),Object(w.jsx)(J,{}),Object(w.jsx)(d.a,{maxWidth:"xl",sx:{flex:1},children:Object(w.jsx)(b.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:t})})]})}var Y=n(338),z=n(384),V=n(394),H=n(393);function K(e){var t=e.address;return Object(w.jsx)(H.a,{href:new URL("/address/".concat(t),"https://etherscan.io").toString(),target:"_blank",rel:"noopener",children:q(t)})}var Q=n(395),X=n(396),Z=n(397),$=n(398),ee=n(399);function te(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(r.useState)(),c=Object(v.a)(n,2),a=c[0],o=c[1],i=Object(r.useState)(!1),s=Object(v.a)(i,2),l=s[0],u=s[1],j=Object(r.useState)(void 0),d=Object(v.a)(j,2),b=d[0],h=d[1],x=Object(r.useCallback)((function(){return u(!0),o(void 0),h(void 0),e().then((function(e){o(e),u(!1)})).catch((function(e){h(e),u(!1)}))}),[e,h,u]);return Object(r.useEffect)((function(){t&&x()}),[x,t]),{data:a,loading:l,error:b,fetchData:x}}var ne=n(378),re=n(188),ce=n(139),ae=ce.a().shape({to:ce.b().required("Address is required").test("isAddress","You have to provide a valid address",(function(e){return!!e&&Object(N.e)(e)}))});function oe(e){var t=e.contract,n=e.tokenId,c=Object(r.useState)(!1),a=Object(v.a)(c,2),o=a[0],i=a[1],s=Object(r.useState)(!1),l=Object(v.a)(s,2),u=l[0],j=l[1],d=Object(r.useState)(),h=Object(v.a)(d,2),x=h[0],f=h[1],g=Object(r.useCallback)((function(e){j(!0),t.transfer(e,n).then((function(){j(!1),i(!0)})).catch((function(e){j(!1),f(e)}))}),[n,t]),p=Object(r.useState)(!1),m=Object(v.a)(p,2),k=m[0],C=m[1],y=function(){C(!1)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(V.a,{variant:"contained",color:x?"error":o?"success":"primary",loading:u,disabled:o,sx:{width:"100%",borderTopLeftRadius:0,borderTopRightRadius:0},size:"large",onClick:function(){C(!0)},children:"Transfer"}),Object(w.jsxs)(I.a,{open:k,onClose:y,children:[Object(w.jsxs)(T.a,{children:["Transferring #",n]}),Object(w.jsx)(re.a,{initialValues:{to:""},validationSchema:ae,onSubmit:function(e){g(e.to),y()},children:function(e){var t=e.submitForm,n=e.isSubmitting,r=e.values,c=e.handleChange,a=e.touched,o=e.errors;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(A.a,{sx:{minWidth:"400px"},children:Object(w.jsx)(b.a,{sx:{pt:2},children:Object(w.jsx)(ne.a,{fullWidth:!0,name:"to",label:"To Address",value:r.to,onChange:c,error:a.to&&Boolean(o.to),helperText:a.to&&o.to})})}),Object(w.jsxs)(E.a,{children:[Object(w.jsx)(O.a,{onClick:y,children:"Cancel"}),Object(w.jsx)(O.a,{variant:"contained",color:"primary",disabled:n,onClick:t,children:"Send"})]})]})}})]})]})}function ie(){return Object(w.jsx)(b.a,{sx:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(w.jsx)(Q.a,{})})}function se(e){var t=e.tokenURI,n=te(Object(r.useCallback)((function(){return fetch(t).then(function(){var e=Object(k.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,t.json();case 4:n=e.sent,console.log(n),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),console.error(e.t0),new Error("Something went wrong");case 12:if(n){e.next=14;break}throw new Error("Something went wrong");case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[t])),c=n.data,a=n.loading,o=n.error,i=n.fetchData;return o?Object(w.jsx)(O.a,{onClick:i,children:"Reload image"}):a||!c?Object(w.jsx)(ie,{}):Object(w.jsx)(X.a,{component:"img",height:"335",image:c.image})}function le(e){var t=e.title,n=e.label;return Object(w.jsxs)(b.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(w.jsx)(Y.a,{children:t}),Object(w.jsx)(Y.a,{children:n})]})}function ue(e){var t=e.contract,n=e.tokenId,c=e.contractAddress,a=te(Object(r.useCallback)((function(){return t.getTokenURI(n)}),[n,t])),o=a.data,i=a.loading,s=a.error,l=a.fetchData;return s?Object(w.jsx)(O.a,{onClick:l,children:"Reload"}):i||!o?Object(w.jsx)(ie,{}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(b.a,{sx:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:o?Object(w.jsx)(se,{tokenURI:o}):null}),Object(w.jsx)(Z.a,{sx:{height:"128px"},children:Object(w.jsxs)(j.a,{direction:"column",spacing:1,children:[Object(w.jsx)(le,{title:"Token Id:",label:"#".concat(n)}),Object(w.jsx)(le,{title:"Contract:",label:Object(w.jsx)(K,{address:c})}),Object(w.jsx)(le,{title:"Metadata:",label:Object(w.jsx)(H.a,{href:o,target:"_blank",rel:"noopener",children:"Open link"})})]})}),Object(w.jsx)($.a,{sx:{padding:0},disableSpacing:!0,children:Object(w.jsx)(oe,{contract:t,tokenId:n})})]})}function je(e){return Object(w.jsx)(ee.a,{sx:{height:"500px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:Object(w.jsx)(ue,Object(F.a)({},e))})}var de=n(100);function be(e,t){try{var n=new de.b(e,["function tokenURI(uint256 _tokenId) external view returns (string memory)","function transfer(address to, uint amount) returns (bool)"],t);return{getTokenURI:function(e){return n.tokenURI(e)},transfer:function(e,t){return n.transfer(e,t,{gasLimit:85e3})}}}catch(r){throw r}}function he(){var e=U(),t=e.account,n=e.library,c=e.activate,a=e.deactivate,o=y(),i=o.exampleAccount,s=o.error,l=o.tokens,u=o.loading,d=o.getTokens;Object(r.useEffect)((function(){return c(),function(){a()}}),[c,a]);var h=null!==i&&void 0!==i?i:t,x=Object(r.useCallback)((function(){h&&d(h)}),[d,h]);return h&&n?s?Object(w.jsx)(Y.a,{children:"An error occured"}):void 0===l||l.length<=0?Object(w.jsxs)(j.a,{direction:"column",spacing:2,children:[Object(w.jsxs)(Y.a,{children:["Your selected wallet is ",Object(w.jsx)(K,{address:h})]}),void 0!==l&&l.length<=0?Object(w.jsx)(Y.a,{children:"You don't have any NFTs. Check out the example or click the button again!"}):null,Object(w.jsx)(V.a,{variant:"contained",loadingPosition:"start",startIcon:"\ud83d\ude80",color:"secondary",onClick:x,loading:u,children:u?"NFTs incoming...":i?"Get NFTs":"Get my NFTs"})]}):Object(w.jsx)(b.a,{sx:{flexGrow:1},children:Object(w.jsx)(z.a,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:l.map((function(e){return Object(w.jsx)(z.a,{item:!0,xs:2,sm:4,md:4,children:Object(w.jsx)(je,Object(F.a)(Object(F.a)({},e),{},{contract:be(e.contractAddress,n.getSigner())}))},"".concat(e.contractAddress,"-").concat(e.tokenId))}))})}):Object(w.jsx)(Y.a,{children:"Connect your wallet first"})}var xe=function(){return Object(w.jsx)(G,{children:Object(w.jsx)(S,{children:Object(w.jsx)(M,{children:Object(w.jsx)(he,{})})})})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,400)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsxs)(s.a,{theme:u,children:[Object(w.jsx)(i.a,{}),Object(w.jsx)(xe,{})]})}),document.getElementById("root")),fe()}},[[332,1,2]]]);
//# sourceMappingURL=main.048cde8c.chunk.js.map